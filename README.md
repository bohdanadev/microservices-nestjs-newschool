# Newschool

This project is a backend for an online school where users can buy courses. It uses a microservices architecture and is built with Node.js, NestJS, RabbitMQ, MongoDB, and Mongoose. The project is generated using Nx.

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, Smart Monorepos · Fast CI.](https://nx.dev)** ✨

## Features

- User registration
- User login
- Profile update
- User info
- Course purchase
- Payments check
- JWT authentication

## Technologies Used

**Node.js**: JavaScript runtime for building the backend.  
**NestJS**: Framework for building scalable and maintainable server-side applications.  
**RabbitMQ**: Messaging broker for communication between services.  
**MongoDB**: NoSQL database for storing user and course data.  
**Mongoose**: ODM for MongoDB, providing a schema-based solution to model data.  
**Nx**: Tool for managing monorepos, enabling the development of multiple applications within a single workspace.

## Authentication

Authentication is implemented using the passport-jwt strategy, which involves validating JWT tokens for secure user authentication.

## Services

### Account Service

The `account` service handles user-related operations such as registration, login, profile updates, and course purchases. Communication with this service is realized using RabbitMQ.

### API Service

The `api` service provides an interface for interacting with the `account` service.

## Getting Started

### Prerequisites

- Node.js
- Docker
- Nx CLI

### Environment Variables

You need to create `.account.env` and `.api.env` files in the `envs` directory and fill them like the `.account.env.example` and `.api.env.example` files.

### Start the application

1. **Start MongoDB and RabbitMQ using Docker:**

   ```bash
   docker compose up -d
   ```

   RabbitMQ can then be accessed at [http://localhost:15672](http://localhost:15672).

2. **Running Tests**

To run tests for the Account Service:

```bash
nx run account:test
```

3. **Run the Account Service:**

   ```bash
   nx run account:serve
   ```

4. **Run the API Service:**

   ```bash
   nx run api:serve
   ```

5. **Or run Both Services in Parallel:**

   ```bash
   nx run-many --target=serve --all --parallel=10
   ```

   API will be running on: http://localhost:3333/api
